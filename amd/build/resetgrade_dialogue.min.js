define(["jquery","core/notification","core/templates","tool_lp/dialogue","tool_lp/event_base","core/str"],function(a,b,c,d,e,f){var g=function(a){e.prototype.constructor.apply(this,[]),this.allCompetencies=a};return g.prototype=Object.create(e.prototype),g.prototype.allCompetencies=!1,g.prototype._popup=null,g.prototype._afterRender=function(){var a=this._find('[data-action="reset"]'),b=this._find('[name="comment"]');this._find('[data-action="cancel"]').click(function(a){a.preventDefault(),this._trigger("cancelled"),this.close()}.bind(this)),a.click(function(a){a.preventDefault(),this._trigger("rated",{note:b.val()}),this.close()}.bind(this))},g.prototype.close=function(){null!==this._popup&&(this._popup.close(),this._popup=null)},g.prototype.display=function(){var a="reset",c="core";return this.allCompetencies&&(a="resetallratings",c="report_lpmonitoring"),this._render().then(function(b){return f.get_string(a,c).then(function(a){this._popup=new d(a,b,this._afterRender.bind(this),this.close.bind(this))}.bind(this))}.bind(this)).fail(b.exception)},g.prototype._find=function(b){return a(this._popup.getContent()).find(b)},g.prototype._render=function(){var a={};return a.allcompetencies=this.allCompetencies,c.render("report_lpmonitoring/competency_reset",a)},g});