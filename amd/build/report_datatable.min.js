define ("report_lpmonitoring/report_datatable",["jquery","report_lpmonitoring/paginated_datatable","report_lpmonitoring/colorcontrast","report_lpmonitoring/jquery.dataTables"],function(a,b,c){var d=function(d,e,f,g,h,i,j,k){this.tableSelector=d;this.reportfilterName=e;this.searchSelector=f;this.searchColumnsSelector=g;this.reportScaleSelector=h;this.coursesSelector=i;this.activitiesSelector=j;this.columns=[];var l=this;a(document).ready(function(){var e=c.init();e.apply("td.evaluation a");b.apply(l.tableSelector,!1,!1);var f=[""];a(l.tableSelector+" thead tr th").each(function(b){if(1<b){a(d+" tbody tr td:nth-of-type("+(b+1)+")").each(function(){var b=a(this).text().trim();if(-1==f.indexOf(b)){var c="";if(b===k){c="selected=\"true\""}a(l.reportScaleSelector).append("<option value=\""+b+"\""+c+">"+b+"</option>");f.push(b)}});l.columns.push(b)}});a(l.reportScaleSelector).on("change",function(){l.performSearch()});a(l.searchSelector).on("input",function(){l.performSearch()});a(l.searchColumnsSelector).on("input",function(){l.filterCoulmns();l.performSearch()});a("input[type=radio][name="+l.reportfilterName+"]").change(function(){l.courseActivityFilter();l.performSearch()});a(d).show();l.courseActivityFilter();l.filterCoulmns();l.performSearch()})};d.prototype.tableSelector=null;d.prototype.reportfilterName=null;d.prototype.searchSelector=null;d.prototype.searchColumnsSelector=null;d.prototype.reportScaleSelector=null;d.prototype.coursesSelector=null;d.prototype.activitiesSelector=null;d.prototype.columns=[];d.prototype.performSearch=function(){var b=a(this.tableSelector).DataTable();b.search("").columns().search("").draw();a(this.tableSelector).DataTable().column(0).search(a(this.searchSelector).val(),!1,!1).draw();var c=a(this.reportScaleSelector+" option:selected").val();a(this.tableSelector).DataTable().search(c,!1,!1).draw()};d.prototype.courseActivityFilter=function(){var b=this,c=a("input[type=radio][name="+b.reportfilterName+"]:checked").val(),d="",e=!1;if("course"===c){d="course-cell";e=!0}else if("module"===c){d="cm-cell";e=!0}if(e){a(b.tableSelector+" thead tr th").each(function(c){if(1<c){var e=a(b.tableSelector).DataTable().column(c),f=e.header(),g=a(this).hasClass(d);a(f).toggleClass("switchsearchhidden",!g);a(this).toggleClass("switchsearchhidden",!g);e.nodes().to$().toggleClass("switchsearchhidden",!g)}})}else{a.each(b.columns,function(c,d){var e=a(b.tableSelector).DataTable().column(d),f=e.header();a(f).removeClass("switchsearchhidden");e.nodes().to$().removeClass("switchsearchhidden")})}};d.prototype.filterCoulmns=function(){var b=a(this.searchColumnsSelector).val().toLowerCase(),c=this;if(""!==b){a(c.tableSelector+" thead tr th").each(function(d){if(1>=d){return!0}var e=a(c.tableSelector).DataTable().column(d),f=e.header(),g=-1<a(this).text().toLowerCase().indexOf(b);a(f).toggleClass("filtersearchhidden",!g);a(this).toggleClass("filtersearchhidden",!g);e.nodes().to$().toggleClass("filtersearchhidden",!g)})}else{a.each(c.columns,function(b,d){var e=a(c.tableSelector).DataTable().column(d),f=e.header();a(f).removeClass("filtersearchhidden");e.nodes().to$().removeClass("filtersearchhidden")})}};return{init:function init(a,b,c,e,f,g,h,i){return new d(a,b,c,e,f,g,h,i)}}});
//# sourceMappingURL=report_datatable.min.js.map
