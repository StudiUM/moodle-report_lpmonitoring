define(["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(b){this.templateid=b,a(document).on("submit","#savescalesvalues",this.saveHandler.bind(this)),a(document).on("change",".donotapplybulk input[type=checkbox]",function(){var b=a(this).data("compid");a("#rating_table_comp"+b).toggleClass("enabled disabled"),a(this).prop("checked")?a("#rating_table_comp"+b).find("input").prop("disabled",!0):a("#rating_table_comp"+b).find("input").prop("disabled",!1)})};return d.prototype.templateid=null,d.prototype.saveHandler=function(){var d,e=[],f=!1,g=this;return a("#savescalesvalues .enabled input[type=radio]:checked").each(function(){var b=a(this).data("compid");e.push({compid:b,value:a(this).val()})}),a('#savescalesvalues input[name="forcerating"]').prop("checked")&&(f=!0),e=JSON.stringify(e),d=b.call([{methodname:"report_lpmonitoring_add_rating_task",args:{templateid:g.templateid,defaultscalesvalues:e,forcerating:f}}]),d[0].done(function(b){b&&(a("#savescalesvalues input[type=submit]").attr("disabled",!0),a("#msg-success-cmrating").show())}).fail(c.exception),!1},{init:function(a){return new d(a)}}});